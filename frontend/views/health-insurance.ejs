<!DOCTYPE html>
<html lang="en-US" dir="ltr">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- ===============================================-->
    <!--    Document Title-->
    <!-- ===============================================-->
    <title>Finance Aggregator</title>

    <!-- ===============================================-->
    <!--    Favicons-->
    <!-- ===============================================-->
    <link rel="apple-touch-icon" sizes="180x180" href="../assets/img/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../assets/img/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../assets/img/favicons/favicon-16x16.png">
    <link rel="shortcut icon" type="image/x-icon" href="../assets/img/favicons/favicon.ico">
    <link rel="manifest" href="../assets/img/favicons/manifest.json">
    <meta name="msapplication-TileImage" content="../assets/img/favicons/mstile-150x150.png">
    <meta name="theme-color" content="#ffffff">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=PT+Sans:wght@700&family=Tajawal&family=Ubuntu&display=swap"
        rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <!-- ===============================================-->
    <!--    Stylesheets-->
    <!-- ===============================================-->
    <link href="../assets/css/theme.css" rel="stylesheet" />
    <link href="../assets/css/product.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        async function bookmarkOption(option, input) {
            alert("here in health")
            let email = localStorage.getItem('email')
            console.log("sending from frontend ")
            console.log("Email is " + email)

            const body = { email: email, output: option, input: input }
            await axios
                .post(
                    "http://localhost:9001/user/bookmark/healthInsurance", body
                )
                .then((res) => {
                    result = res.data.status;
                    alert("Bookmark added")
                    console.log("SUCCESSFUL")
                })
                .catch((error) => {
                    console.error(error);
                });
        }
    </script>


</head>


<body>
    <%- include('template.ejs') -%>

    <section class="py-7" id="services" container-xl="container-xl">
        <div class="container">
            <div class="row h-200 justify-content-center">
                <div class="col-md-3 pt-4 px-md-2 px-lg-3">
                    <div class="card px-lg-5 card-span">
                        <div class="card-body d-flex flex-column justify-content-around">
                            <div class="text-center pt-5">
                                <img class="img-fluid" src="../assets/img/icons/Shape 1.png" width="55" alt="..." />
                                <h4 class="my-4">Health Insurance</h4>
                            </div>
                            <div>
                                <form id="form" method="post" action="/health-insurance/query">
                                    <label for="noOfPeople" class="mt-3">No of people</label>
                                    <div class="flex">
                                        <span class="currency"> </span>
                                        <% if(typeof(noOfPeople) == 'undefined') { %>
                                        <input id="noOfPeople" name="noOfPeople" type="number" maxlength="15"
                                            required />
                                        <% } else { %> <input id="noOfPeople" name="noOfPeople" type="number"
                                            maxlength="15" value="<%= noOfPeople %>" required />
                                        <% } %>
                                    </div>
                                    <label for="noOfDiseases" class="mt-3">No of diseases</label>
                                    <div class="flex">
                                        <span class="currency"> </span>
                                        <% if(typeof(noOfDiseases) == 'undefined') { %>
                                        <input id="noOfDiseases" name="noOfDiseases" type="number" maxlength="15" />
                                        <% } else { %> <input id="noOfDiseases" name="noOfDiseases" type="number"
                                            maxlength="15" value="<%= noOfDiseases %>" />
                                        <% } %>
                                    </div>
                                    <label for="age" class="mt-3">Age</label>
                                    <div class="flex">
                                        <span class="currency"> </span>
                                        <% if(typeof(age) == 'undefined') { %>
                                        <input id="age" name="age" type="number" maxlength="15" />
                                        <% } else { %> <input id="age" name="age" type="number" maxlength="15"
                                            value="<%= age %>" />
                                        <% } %>
                                    </div>

                                    <div class="filters">
                                        <label for="criteria" class="mt-3"> Sort </label>
                                        <div class="select">
                                            <% if(typeof(criteria) == 'undefined') { %>
                                            <select name="criteria" id="criteria">
                                                <option selected>Sort Criterias</option>
                                                <option value="premium">Premium</option>
                                                <option value="cover">Cover</option>
                                                <option value="cashless_hospitals">Cashless hospitals</option>
                                            </select>
                                            <% } else if(criteria == 'cashless_hospitals') { %>
                                            <select name="criteria" id="criteria">
                                                <option value="premium">Premium</option>
                                                <option value="cover">Cover</option>
                                                <option value="cashless_hospitals" selected="selected">Cashless
                                                    hospitals</option>
                                            </select>
                                            <% } else if(criteria == 'premium') { %>
                                            <select name="criteria" id="criteria">
                                                <option value="premium" selected="selected">Premium</option>
                                                <option value="cover">Cover</option>
                                                <option value="cashless_hospitals">Cashless hospitals</option>
                                            </select>
                                            <% } else if(criteria == 'cover') { %>
                                            <select name="criteria" id="criteria">
                                                <option value="premium">Premium</option>
                                                <option value="cover" selected="selected">Cover</option>
                                                <option value="cashless_hospitals">Cashless hospitals</option>
                                            </select>
                                            <% } %>
                                        </div>
                                    </div>
                                    <br>
                                    <div class="text-center mb-5">
                                        <!-- <div class="d-block"> -->
                                        <button class="btn btn-danger px-4" type="submit">Go</button>
                                        <!-- </div> -->
                                    </div>
                                </form>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-9 pt-4 px-md-2 px-lg-3">
                    <div class="card px-lg-5 card-span">
                        <div class="card-body d-flex flex-column justify-content-around">
                            <div class="row">
                                <div class="card bg-light border-0">
                                    <div class="row py-2">
                                        <!-- <div class="col-sm-2">
                                                <div class="filters">
                                                    <div class="select">
                                                        <select name="filters" id="filters">
                                                    <option value="1" selected="selected">Premium</option>
                                                    <option value="2">Cover</option>
                                                    <option value="3">Cashless hospitals</option>
                                                </select>
                                                    </div>
                                                </div>
                                            </div> -->
                                        <div class="col-sm-2 text-center">
                                            <p class="fw-bolder mb-0">Insurance</p>
                                        </div>
                                        <div class="col-sm-2 text-center">
                                            <p class="fw-bolder mb-0">Premium</p>
                                        </div>
                                        <div class="col-sm-2 text-center">
                                            <p class="fw-bolder mb-0">Cover</p>
                                        </div>
                                        <div class="col-sm-2 text-center">
                                            <p class="fw-bolder mb-0">Cashless Hospitals</p>
                                        </div>
                                        <div class="col-sm-2 text-center">
                                            <p class="fw-bolder mb-0">Diseases Covered</p>
                                        </div>
                                    </div>
                                </div>
                                <% for (var index = 0; index < allInsurances.length; index++) { %>
                                <div class="card mt-2 result1">
                                    <div class="py-3 px-2 row">

                                        <div
                                            class="col-sm-2 d-flex justify-content-center text-center align-items-center border-end">
                                            <p class="my-0"
                                                style="font-family: 'Tajawal', serif; text-align: center; letter-spacing: 0.75px; color: #5A5A5A;">
                                                <%= allInsurances[index]["agency"] %>
                                            </p>
                                        </div>
                                        <div
                                            class="col-sm-2 d-flex justify-content-center text-center align-items-center">
                                            <p class="my-0" style="font-family: 'PT Sans'">
                                                <%= allInsurances[index]["premium"] %>
                                            </p>
                                        </div>
                                        <div
                                            class="col-sm-2 d-flex justify-content-center text-center align-items-center">
                                            <p class="my-0" style="font-family: 'PT Sans'">
                                                <%= allInsurances[index]["cover"] %>
                                            </p>
                                        </div>
                                        <div
                                            class="col-sm-2 d-flex justify-content-center text-center align-items-center">
                                            <p class="my-0" style="font-family: 'PT Sans'">
                                                <%= allInsurances[index]["cashless_hospitals"] %>
                                            </p>
                                        </div>
                                        <div
                                            class="col-sm-2 d-flex justify-content-center text-center align-items-center">
                                            <p class="my-0" style="font-family: 'PT Sans'">
                                                <% for (var i = 0; i < allInsurances[index]["diseases"].length; i++) { %>
                                                <%= allInsurances[index]["diseases"][i]%>
                                                <% } %>

                                            </p>
                                        </div>
                                        <!-- <div class="col-sm-2 d-flex justify-content-center text-center align-items-center">
                                                    <h3 style="font-family: 'PT Sans';">
                                                        <%= allInsurances[index]["premium"]%>
                                                    </h3>
                                                </div>
                                                <div class="col-sm-2 d-flex justify-content-center text-center align-items-center">
                                                    <h3 style="font-family: 'PT Sans';"><span style="font-family: Arial, Helvetica, sans-serif;"></span>
                                                        <%= allInsurances[index]["cover"] %> 
                                                    </h3>
                                                </div>
                                                <div class="col-sm-2 d-flex justify-content-center text-center align-items-center">
                                                    <h3 style="font-family: 'PT Sans';"><span style="font-family: Arial, Helvetica, sans-serif;"></span>
                                                        <%= allInsurances[index]["cashless_hospitals"] %> 
                                                    </h3>
                                                </div>
                                                <div class="col-sm-2 d-flex justify-content-center text-center align-items-center">
                                                    <h3 style="font-family: 'PT Sans';"><span style="font-family: Arial, Helvetica, sans-serif;"></span>
                                                        <%= allInsurances[index]["diseases"] %> 
                                                    </h3>
                                                </div> -->
                                        <div
                                            class="col-sm-2 d-flex flex-column align-items-center justify-content-center">
                                            <div class="d-flex justify-content-center"><i
                                                    class="far fa-solid fa-star text-danger fw-light"></i></div>
                                            <div class="text-danger text-center">
                                                <h6 onclick="bookmarkOption((<%= JSON.stringify(allInsurances[index]) %>), (<%= JSON.stringify(input) %>))"
                                                    class="mb-0 mt-2 text-danger fw-light">Bookmark</h6>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <% } %>
                            </div>
                        </div>
                        <div class="center text-center">
                            <p>
                                <%= allInsurances.length %>
                                results</p>
                        </div>
                    </div>
                </div>
    </section>

    <script src="vendors/@popperjs/popper.min.js"></script>
    <script src="vendors/bootstrap/bootstrap.min.js"></script>
    <script src="vendors/is/is.min.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=window.scroll"></script>
    <script src="vendors/fontawesome/all.min.js"></script>
    <script src="../assets/js/theme.js"></script>
    <script src="../assets/js/product.js"></script>
    <script src="./routes/health-insurance.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@200;300;400;500;600;700;800&amp;display=swap"
        rel="stylesheet">
</body>

</html>